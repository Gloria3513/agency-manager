# 🚀 올인원 에이전시 관리 시스템

1인 에이전시 운영자를 위한 통합 관리 시스템입니다. 고객 문의부터 계약, 프로젝트 관리, 정산까지 한 곳에서 처리할 수 있습니다.

## 🎯 주요 기능

### ✅ 1단계 (완료)
- **공개 설문 페이지**: 고객이 프로젝트를 문의할 수 있는 폼
- **고객 관리 (CRM)**: 고객 정보 등록, 수정, 삭제, 상태 관리
- **관리자 대시보드**: 월별 매출, 진행 중인 프로젝트 시각화
- **견적 관리**: 수동 견적서 생성 및 관리
- **프로젝트 관리**: 프로젝트 생성, 진행률 추적, 태스크 관리, 칸반 보드
- **설정 페이지**: 단가 지침, 이메일 설정, 회사 정보

### ✅ 2단계 (완료)
- **🤖 AI 견적서 자동 생성**: OpenAI API 연동, 문의 내용 분석 후 자동 견적 생성
- **📄 PDF 다운로드**: 한글 폰트 지원, 전문적인 견적서 PDF 생성
- **📧 이메일 발송**: SMTP 연동, HTML 템플릿, PDF 첨부
- **AI 사용 로그**: 토큰 사용량 및 비용 추적 (ai_logs 테이블)

### ✅ 3단계 (완료)
- **📄 전자 계약서**: 견적서 → 계약서 자동 변환
- **✍️ 전자 서명**: Canvas 기반 서명 (터치 지원)
- **🔗 서명 링크**: 고객에게 서명 요청 링크 발송
- **📊 서명 메타데이터**: IP 주소, 시간, 이메일 기록
- **💳 청구서 생성**: 프로젝트별 계약금/중도금/잔금 관리
- **📧 입금 알림**: 입금 예정일 도래 시 자동 알림

## 🛠 설치 및 실행

```bash
# 패키지 설치
pip install -r requirements.txt

# 앱 실행
streamlit run app.py

# 브라우저에서 http://localhost:8501 접속
```

## 📁 프로젝트 구조

```
agency_manager/
├── 📄 app.py                      # Streamlit 메인 앱
├── 📄 database.py                 # SQLite 데이터베이스 모델 (9개 테이블)
├── 📄 requirements.txt            # 의존성 패키지
├── 📄 README.md                   # 프로젝트 문서
├── 📁 data/
│   └── agency.db                 # SQLite 데이터베이스
├── 📁 static/css/
│   └── style.css                 # 블루 테마 커스텀 스타일
├── 📁 templates/
│   ├── survey.html               # 공개 설문 페이지
│   └── contract_sign.html        # 전자 서명 페이지
└── 📁 utils/
    ├── __init__.py
    ├── ai_generator.py           # OpenAI GPT 연동
    ├── pdf_generator.py          # ReportLab PDF 생성
    ├── email_sender.py           # SMTP 이메일 발송
    └── contract_generator.py     # 계약서 생성/서명 검증
```

## 🎨 특징

- **모던한 UI**: 블루 계열의 전문적인 디자인
- **다크 모드**: 라이트/다크 모드 토글 지원
- **반응형**: 모바일에서도 사용 가능
- **확장 가능**: SQLite로 시작하며 추후 PostgreSQL/MySQL로 마이그레이션 가능

## 📝 사용법

### 1. 설정
1. **설정** 페이지에서 회사 정보 입력
2. OpenAI API 키 입력 (AI 견적 생성용)
3. SMTP 설정 (Gmail 앱 비밀번호 필요)

### 2. 단가 지침 설정
AI가 참조할 단가표를 설정합니다:
```
웹사이트 제작: 500만원 ~ 1,500만원
랜딩페이지: 200만원 ~ 500만원
쇼핑몰: 800만원 ~ 2,000만원
...
```

### 3. 워크플로우
1. **고객 문의** → 문의 관리 페이지에서 확인
2. **견적 생성** → AI 자동 생성 또는 수동 입력
3. **견적 발송** → PDF 다운로드 또는 이메일 발송
4. **계약 체결** → 계약서 생성 및 서명
5. **프로젝트 시작** → 프로젝트 관리 페이지에서 진행률 추적
6. **정산** → 청구서 생성 및 입금 확인

## 📄 라이선스

MIT License

## 🙋 지원

문의사항이 있으시면 이슈를 남겨주세요.
